{% comment %} Theme Selection Page {% endcomment %}
<div class="text-center mb-8">
    <h1 class="text-4xl font-bold text-primary mb-2">Theme Settings</h1>
    <p class="text-base-content/70 text-lg">Choose the perfect theme for your shop</p>
    {% if selected_template %}
        <div class="mt-4 p-3 bg-success/10 border border-success/20 rounded-lg inline-block">
            <span class="text-success font-medium">Currently using: {{ selected_template }}</span>
        </div>
    {% endif %}
</div>
{% comment %} Theme Selection Form {% endcomment %}
<form id="form"
      hx-post="{% url 'backoffice:settings-tenant' %}"
      hx-trigger="submit"
      hx-headers='{"action": "settings_change"}'
      hx-swap="outerHTML"
      hx-target="#form"
      hx-select="#form">
    {% csrf_token %}
    <div class="mt-8" role="radiogroup" aria-label="Theme selection">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {% for template in shop_templates %}
                <div class="group relative">
                    <label class="block border-2 rounded-2xl overflow-hidden transition hover:shadow-xl hover:border-primary/50 {% if my_template == template.name %}border-primary shadow-lg{% else %}border-base-300{% endif %}">
                        <!-- Template Preview -->
                        <figure class="relative overflow-hidden">
                            {% if template.screenshot %}
                                <img src="{{ template.screenshot.url }}"
                                     alt="{{ template.name }} preview"
                                     class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105">
                            {% else %}
                                <div class="w-full h-48 bg-gradient-to-br from-base-200 to-base-300 flex items-center justify-center">
                                    <svg class="w-16 h-16 text-base-content/30"
                                         fill="none"
                                         stroke="currentColor"
                                         viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                </div>
                            {% endif %}
                            <!-- Overlay -->
                            <div class="absolute inset-0 bg-primary/10 transition-opacity duration-300 {% if my_template == template.name %}opacity-100{% else %}opacity-0 group-hover:opacity-20{% endif %}">
                            </div>
                            {% if my_template == template.name %}
                                <div class="absolute top-3 right-3 bg-primary text-primary-content px-3 py-1 rounded-full text-sm font-medium shadow-lg">
                                    <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                    </svg>
                                    Active
                                </div>
                            {% endif %}
                        </figure>
                        <!-- Template Info -->
                        <div class="card-body p-4 text-center">
                            <h3 class="card-title text-lg font-semibold justify-center mb-2">{{ template.name }}</h3>
                            <div class="flex justify-center">
                                <input type="radio"
                                       name="selected_template"
                                       value="{{ template.id }}"
                                       class="radio radio-primary radio-lg"
                                       {% if my_template == template.name %}checked{% endif %}
                                       aria-label="Select {{ template.name }} theme" />
                            </div>
                        </div>
                    </label>
                </div>
            {% endfor %}
        </div>
    </div>
    <!-- Save Button -->
    <div class="mt-12 flex justify-center gap-4">
        <button type="submit"
                class="btn btn-primary btn-lg px-8 shadow-lg hover:shadow-xl transition-all">
            <svg class="w-5 h-5 mr-2"
                 fill="none"
                 stroke="currentColor"
                 viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            Save Selection
        </button>
    </div>
</form>
<!-- Help Text -->
<div class="mt-8 text-center">
    <p class="text-base-content/60 text-sm max-w-md mx-auto">
        Select a theme that best represents your brand. Changes will be applied immediately after saving.
    </p>
</div>
